use nanorand::Rng;
use nanorand::WyRand;
use serde::{Deserialize, Serialize};
use strum::EnumCount;
use strum::EnumIter;
use strum::FromRepr;
use utoipa::ToSchema;

#[derive(
    Serialize, FromRepr, Deserialize, EnumCount, Default, ToSchema, EnumIter, Clone, Debug,
)]
pub enum Job {
    Alchemist,
    AnimalTrainer,
    #[default]
    Apothecary,
    Archer,
    Armorer,
    Artificer,
    Assassin,
    Astrologer,
    Baker,
    Barkeep,
    Baron,
    BeastHunter,
    Beekeeper,
    Beggar,
    Blacksmith,
    Boatwright,
    BoneCarver,
    BountyHunter,
    Brewer,
    Brigand,
    Butcher,
    Candlemaker,
    Carpenter,
    Cartographer,
    Chamberlain,
    Chandler,
    Chancellor,
    Charlatan,
    Chef,
    Cleric,
    Cobbler,
    Conjurer,
    Cook,
    Cooper,
    Courier,
    CourtJester,
    CourtWizard,
    Crystalmancer,
    Cultist,
    Cutpurse,
    Dancer,
    Diplomat,
    Diviner,
    Dockworker,
    Druid,
    Duke,
    Enchanter,
    Engineer,
    Executioner,
    Exorcist,
    Explorer,
    Falconer,
    Farmer,
    Fence,
    Fisherman,
    Fletcher,
    Florist,
    FortuneTeller,
    Gambler,
    Gardener,
    Gladiator,
    Glassblower,
    Gravekeeper,
    Gravedigger,
    GuildMaster,
    Gunsmith,
    Handmaiden,
    Healer,
    Herald,
    Hermit,
    Herbalist,
    Highwayman,
    Historian,
    Hunter,
    Illusionist,
    Innkeeper,
    Inventor,
    Jailer,
    Jester,
    Jeweler,
    Knight,
    LadyInWaiting,
    Lancer,
    Leatherworker,
    Librarian,
    Locksmith,
    Lord,
    Mage,
    Magister,
    Maid,
    Mapmaker,
    Marshal,
    Mason,
    Mercenary,
    Merchant,
    Messenger,
    Midwife,
    Miller,
    Minstrel,
    Missionary,
    Monk,
    MonsterHunter,
    Mortician,
    Mystic,
    Necromancer,
    Noble,
    Oracle,
    Outlaw,
    Paladin,
    Painter,
    Pariah,
    Pathfinder,
    Peasant,
    Philosopher,
    Pirate,
    PlagueDoctor,
    Poet,
    Porter,
    PotionMaker,
    Priest,
    Prince,
    Princess,
    Prophet,
    Prospector,
    Queen,
    Ranger,
    RatCatcher,
    Rebel,
    Refugee,
    Riddlemaster,
    Rogue,
    RoyalGuard,
    Runecaster,
    Sage,
    Sailor,
    Sapper,
    Scribe,
    Sculptor,
    Seer,
    Servant,
    Shepherd,
    Sheriff,
    Shipwright,
    Shoemaker,
    Shopkeeper,
    Shoveler,
    Silversmith,
    Smith,
    Smuggler,
    Soothsayer,
    Sorcerer,
    Squire,
    Stablehand,
    Steward,
    Stonemason,
    Storyteller,
    StreetPerformer,
    Summoner,
    Swordsmith,
    Tailor,
    Tanner,
    TaxCollector,
    Thief,
    Thug,
    Tinker,
    Torturer,
    TownCrier,
    Trader,
    Trapper,
    TreasureHunter,
    TribalChieftain,
    Troubadour,
    UndeadHunter,
    Undertaker,
    Vagabond,
    Valet,
    Vintner,
    Wainwright,
    Warlock,
    Warlord,
    Warrior,
    Washerwoman,
    Watchman,
    WeaponMaster,
    Weaver,
    Witch,
    WitchHunter,
    Wizard,
    Woodsman,
    Wretch,
    Zealot,
    Zoologist,
    BoneCollector,
    FireEater,
}

impl Job {
    pub fn random() -> Self {
        Self::from_repr(WyRand::new().generate_range(0..Self::COUNT)).unwrap_or_default()
    }

    pub fn filtered_random(filter: &[Self]) -> Self {
        if filter.is_empty() {
            Self::random()
        } else {
            filter
                .get(WyRand::new().generate_range(0..filter.len()))
                .cloned()
                .unwrap_or_default()
        }
    }
}
